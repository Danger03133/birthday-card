<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday</title>
<style>
    body {
        margin: 0;
        font-family: sans-serif;
        background: #f7f7f7;
        overflow-x: hidden;
    }

    .center {
        text-align: center;
        padding: 20px;
    }

    #cakePopup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 999;
        display: none;
    }

    #cakePopup img {
        max-width: 80%;
        border-radius: 20px;
    }

    .message-box {
        max-width: 600px;
        margin: 40px auto;
        background: white;
        padding: 20px;
        border-radius: 18px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .footer-right {
        text-align: right;
        font-weight: bold;
        margin-top: 20px;
        font-size: 18px;
    }

    .hidden {
        display: none;
    }

    #finalImage {
        max-width: 90%;
        border-radius: 20px;
        margin: 20px auto;
        display: block;
    }

    .btn {
        padding: 12px 20px;
        background: #ff6bb5;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 18px;
        cursor: pointer;
        margin-top: 20px;
    }

</style>
</head>
<body>

<div class="center">
    <button class="btn" onclick="showCake()">Ø§Ø¶ØºØ· Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø© ğŸ‰</button>
</div>

<div id="cakePopup">
    <img id="cakeImg" src="cake.png" alt="Cake">
</div>

<img id="finalImage" class="hidden" src="birthday_photo.jpg" alt="Birthday Photo">

<div id="message" class="message-box hidden">
    <p>ğŸ’•ğŸ«‚Happy birthday, dearğŸ«‚ğŸ’•<br><br>
Ù‡ÙÙ†ÙÙŠØ¦Ù‹Ø§ Ù„ÙÙƒÙ Ø§Ù„Ø¹ÙÙŠØ¯Ù Ø§Ù„Ù‘ÙØ°ÙÙŠ Ø£ÙÙ†ØªÙ Ø¹ÙÙŠØ¯ÙÙ‡Ù<br>
ÙˆÙØ£ÙÙ†ØªÙ Ù…ÙÙ† ÙÙÙŠÙ’Ø¶Ù Ø§Ù„Ø¨ÙÙ‡ÙØ§Ø¡Ù ØªÙØ²ÙÙŠØ¯ÙÙ‡Ù<br>
ÙˆÙØ¥ÙÙ†Ù‘ÙÙŠ Ø¥ÙØ°ÙØ§ Ø£ÙÙ‡Ù’Ø¯ÙØ§ÙƒÙ ØºÙÙŠÙ’Ø±ÙÙŠ ÙˆÙØ±Ù’Ø¯ÙØ©Ù‹<br>
Ø³ÙØ£ÙÙ‡Ø¯ÙÙŠÙƒÙ Ù‚ÙÙ„ÙØ¨Ù‹Ø§ Ø£ÙÙ†ØªÙ ÙÙÙŠÙ‡Ù ÙˆÙØ±ÙÙŠØ¯ÙÙ‡Ù<br><br>
My dearest, my heart, my most precious possession..âœ¨<br><br>
Happy birthday, my dear. I always hope you are in good health and well-being. I met you this year and thanks to you it became the best year of my life..ğŸŒ¸ğŸ’•<br><br>
Ø§Ù„Ù„Ù‡ ÙŠØ­ÙØ¸Ùƒ ÙˆÙŠØ®Ù„ÙŠÙƒ Ù„ÙŠØ§ ÙˆÙŠØ¯ÙˆÙ… ØµØ­Ø¨ØªÙ†Ø§ ÙˆØµØ¯Ø§Ù‚ØªÙ†Ø§..ğŸ™ğŸ»<br><br>
ØªØ°ÙƒØ± Ø¯ÙŠÙŠÙŠÙŠÙ…Ø§ Ø¨Ù„ÙŠ Ø¹Ù†Ø¯Ùƒ Ø¨Ù†Ø§Ø¯Ù… ÙŠÙ‡ØªÙ… Ø¨Ø§Ù…Ø±Ùƒ ÙˆÙŠØ­Ø¨Ùƒ Ù„Ø§Ø¨Ø¹Ø¯ Ù…Ø§ØªØªØµÙˆØ±â€¦ğŸ¥¹â¤ï¸<br><br>
Ğ¯ Ğ»ÑĞ±Ğ»Ñ Ñ‚ĞµĞ±Ñ Ğ½Ğ° Ğ²ÑĞµÑ… ÑĞ·Ñ‹ĞºĞ°Ñ… Ğ¼Ğ¸Ñ€Ğ°, Ğ¼Ğ¾Ñ Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ°Ñ..ğŸ¥€ğŸ«€</p>

    <div class="footer-right">Ø²Ù†Ø¬ÙˆØ¬Ùƒ Ø§Ù„ÙˆÙÙŠ ~</div>
</div>

<script>
function showCake() {
    document.getElementById("cakePopup").style.display = "flex";
    startMic();
}

function startMic() {
    if (!navigator.mediaDevices) return;

    navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const mic = audioContext.createMediaStreamSource(stream);
        const analyser = audioContext.createAnalyser();
        analyser.fftSize = 256;
        mic.connect(analyser);

        const data = new Uint8Array(analyser.frequencyBinCount);

        function detectBlow() {
            analyser.getByteFrequencyData(data);
            let volume = data.reduce((a,b)=>a+b) / data.length;

            if (volume > 70) { 
                showFinal();
                stream.getTracks().forEach(t => t.stop());
            } else {
                requestAnimationFrame(detectBlow);
            }
        }
        detectBlow();
    });
}

function showFinal() {
    document.getElementById("cakePopup").style.display = "none";
    document.getElementById("finalImage").classList.remove("hidden");
    document.getElementById("message").classList.remove("hidden");
    fireworks();
}

function fireworks() {
    for (let i = 0; i < 80; i++) {
        let conf = document.createElement("div");
        conf.style.position = "fixed";
        conf.style.width = "8px";
        conf.style.height = "8px";
        conf.style.background = `hsl(${Math.random()*360},100%,50%)`;
        conf.style.top = "-10px";
        conf.style.left = Math.random()*100 + "%";
        conf.style.borderRadius = "50%";
        conf.style.transition = "3s";
        document.body.appendChild(conf);
        setTimeout(()=>{
            conf.style.top = "110%";
            conf.style.opacity = 0;
        },20);
        setTimeout(()=>conf.remove(), 3200);
    }
}
</script>

</body>
</html>
